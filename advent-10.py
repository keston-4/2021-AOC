#data = ['[({(<(())[]>[[{[]{<()<>>','[(()[<>])]({[<{<<[]>>(','{([(<{}[<>[]}>{[]{[(<()>','(((({<>}<{<{<>}{[]{[]{}','[[<[([]))<([[{}[[()]]]','[{[{({}]{}}([{[{{{}}([]','{<[[]]>}<{[{[{[]{()[[[]','[<(<(<(<{}))><([]([]()','<{([([[(<>()){}]>(<<{{','<{([{{}}[<[[[<>{}]]]>[]]']
data = ['<{([{(<[(<[({<{}[]>([]{})})((<{}[]>{[]{}})([(){}]<()<>>))]>)({([<{<>[]}(<>[]>>][([()[]]{[]()})<(<>{}','[[[[[({(([<[[([][])<<>()>]{<[]{}>(()<>)})(<<<>[]>{<><>}>(<(){}><[]()>))>](([(<{}[]>(()()))<<{}{}','[[[<(([([<{<<<<><>>([]{})>{{{}()}<[]()>}><[{{}{}}(<><>)]>}<(({{}()}(<>[]))({[]()}[[]]))(<[[]()](())>({{','(([<{<<[[<{(([[]]<<>>){([]{})<(){}>})}>{{{[<<>[]>([][]>]}}[{[{<>[]}[<><>]][[<>()]({}())]}(<{[]}[()[]]><','[<<[{{({[{{[<<<><>>[{}<>]>[<<>{}>(()[])]]}}<[(<<{}[]]([]<>)>)[[{<><>}{()()}]<<<>()>>]]<({(<>{})}[{','[<{<({{[[<<<[([]{}){[]<>]][<<>{}>]>{[[[]<>][<>[]]]}>>{[[<(()())<<>[]>>[{{}[]}{[][]}]][[([]())<()<>>][([]<>)<[','<{<{<[(((<((<[()<>]<[]()>>{<<>()>(<>[])}))>)[([(([()]<{}[]>)[{<>()}[[]{}]])<<[[]<>][{}]>{[{}()]([]<>)}>','([{[{(({{((([{[]()}[[]()]])[<({}<>){<>{}}>{{{}[]}{()()}}])[[((()<>)[<><>])[({}<>)({}())]]]}[[[[<<>()>[{}[]]]','[[[<[<{[(<<(({[]<>}(<><>)){[()<>]})>><([[<[]()>]([<>[]]<()[]>)]{({{}()}<[]<>>)[({}<>)<<>{}>]>)[<({{','<{{[[[<([<<<(<[]()>)([<>[]]<{}{}>)>[[[[][]]](<()[]>[()[]])]>>]{{[(({<>()}{<><>}){(()<>}[[]{}]}','{<{<((([<{<{[{[][]}{[]()}][({}[]){{}[]}]}{((<><>)(<>{}])(<{}()><<><>>)}>(<{{<>{}}{()()}}>[<(<><>)[<>','<{[<<[([[<<{[<<>[]>](<{}()>)}[(<<>{}>{{}[]})<[(){}][[]()]>]>>]<{{[<{()()}{()[]}>[(<>[]){()()}]][{(','[[<<(<{{<{{{([{}()][[]]){{()[]}((){})}}[[[<><>]{<>}]{[<>[]]{(){}}}]}(<([()()][()()]){{()}([]())}>)}[[','[<[{<((<{{((<{{}<>}[{}()]>[{[]()}{[]<>}])({[()()]}[{<>>([]{})]))}<((((<>{})(()<>)){{[][]}})){[{<<>[]>[{}{}','[[([<{[[((<(<<{}{}>><{[]<>}>){<<()<>>[{}{}]>}><{[[()[]]{()()}][(<>{})]}{{{[][]}<[]()>}(<<>[]><(){}','[[{<{[<<(({(<[[]()]<[]()>>([(){}]<{}>)){<[[]{}]{[]<>}>{<[]{}>[()<>]}}}{(((()){{}[]}){[<>{}]{[]()}})[({[]{}','([<{{(({{<<<<({}[]){(){}}>{({}[])<[][]>}>[{(()<>)([]{})}(<[]()><{}[]>)]>({{{()[]}{(){}}}({()()}<[]{}','<[({{({{{(([{(<>()){[][]}}[([]{})<[][]>]]{<[<>[]]<<>{}>>[[{}<>][{}[]]]})<([(())[()<>]](([]())[(){}]','(<[<<<{{<([{[(<>{})(()<>)]([{}]{[][]>)}({{()[]}}((()()){(){}}))]([({()}[[]<>]){{<>[]}(()())}]<{[[]()]{{','({{((<(([{{[<[{}{}][[][]]><[{}()]{[]{}}>]{<[<><>](<><>)>[{[]()}<<>[]>]}}<[{{[]{}}<(){}>]{{<>}<()<>>}][((<>','({(({<<{(<<<[(()<>)((){})]<[<><>]<<>[]>>>([{(){}}{<>()}][({}())])><{<<<><>>(()())>{{{}()}[[][]]}','({((<{((({<<<[{}{}][[]()]>[<{}<>>{{}<>}]>(<[[]<>][{}[]]>>>[[[<()>{()<>}]<{<><>}<[][]>>]{<(<','{<<<[{(<{([{<<()()>((){})>}([[()()]](<<>())([][])))]({[({}<>){[][]}][(<>){<>[]}]}[{[{}[]]<[','[[[{{[{((([{(<{}()><{}[]>)<{{}[]}[()()]>}{{{<>[]}[()()]}(([]{})[()()])}][<(({}())({}()))(({}<>)[{}','<[{({[{[([[<(<(){}>{<>{}})>(([()[]]<[]{}>)<{{}()}{()<>}>)]][[<(<[]{}><()()>)[[()()]<(){}>]><[<()()><{}<>>]>','[({<{[(<{([[[<[][]>{[]{}}]{{(){}}[{}()]}]{[(<><>)[<>{}]]{{[][]}}}])}><<[[[{({}())((){})}({{}{}}{[][]})]({<[]','[{{(({[<[<({(<[][]>({}[]))[[()<>][()()]]})<[({<>}(<><>))[<<>[]>(<><>)]]<<[()[]]<<>()>>([()()]<[]<>>)>>>]','<[[<{([((<[<<<{}()><<>[]>>{{[][]}}>[{{<><>}({}{})}<[{}()]>]]>){[((((()()){(){}})[[{}{}]{[]()}]))(<(([','((<{{[(({(<([{{}()}{(){}}]<({}{})[[][]}>)><{{<()[]>({}())}<[<>[]]{<>[]}>}>)<<[[[<>{}](<>[])][{()}]]({(<>','<([[([{[<[[<<(<><>)<()>>>]]<[<({<>[]}<[]>)><<({}())<{}<>>><({}())>>][(([<>{}]{()<>})[[{}<>]{()[]}])({<()()>','[<[<[({<<({<{<[]<>>}[{<>[]}]>})>>}[<[(({([[]<>]<<>>)[<[]{}>]}))]>(([{<[[{}[]]<<>[]>]<{{}()}<[]','[<[[(<<{[{{<<(<>{})<{}()>><<{}<>>(<>())>><{([][])[{}()]}[{[]{}}{{}[]}]>}<<<({}{}}[[]<>]><[','<[{{([({[(<([(<>[])<[][]>][<[]{}>(<>)]){<[()<>]({}())>([{}()](()<>))}>(<{<<>()>[()]}>{{[<>[]]{()()}}{{','(<<{[([([<{[[{{}()}(<><>)){[[][]]}]({<(){}>{()[]}}<((){}){[]()}>)}>(<(<<[]<>>{{}}>)>[[(<{}<>>{(){}}){{','(((((<[<<([<<<[]{}>{<>[]}>(<[][]>[[][]])>])<<<{[<>[]]({}{})}[{()[]}<<>()>]>({<{}()><{}[]>}','(([[[[[{[[{(((<>{})([]<>))(([]{})<()<>>))({{<>()}{[]()}}<<()()>(()[])>}}<[[{{}{}}(<>{})]{[[]()]{{}<>}}][<{<>(','(<{{[{(((((<[<<><>>]>({(()<>)<{}<>>}{<<>[]>({}{})}))){<<<[{}[]][<>()]>><[<<>[]>]<[()()]<{}<>>>>>{[{{()[','[[({<[{{{<[<{({}<>)<<>{}>}({<>[]}([]<>))>[{(<><>){<>}}({{}[]}([][]))]]>{{<[<{}>(()<>}]{<{}<>><(','[<{{(<[<({[[{(<>()){{}[]}}[([][])<(){}>]]]<(<{{}{}}([]())>([[]{}]<[]<>>))<[<<><>>[<>{}]](([]()){<>','{{{<(<<([{({[<{}{}>[[]<>]]{{(){}}[[]{}]>}(((()())[<>[]])((()[])[(){}])))<{<[{}{}]>}{(<{}[]>{{}<>})<','(<<[<{{{{(<<(({}[])[()[]])<([]{})>>({({}())({}[])}{{<>[]}(()())}]>{[[[{}()]{<>()}]<(()())[<><>]>]}','[<{<{(([((<{[{[]<>}(()[])]}[[[()()]{{}[]}]<<(){}>{()<>}>]><((<[]><{}{}))[{{}<>}])[{([][])<[]{}>}','(<(<{[((((<(([()[]][<>()])<[[]]<{}[]>>)<<{{}()}([]<>)>({()()}(<><>))>>[([(()[])<[]<>>]{{()()}})[{(<>())[{}','[<{(<((<[[[[[{[]<>}<<>{}>]([[][]]({}[]))]{([{}()][<><>])}]{<[({}<>)({}{})]<((){}){<>{}}>>({[[](','([{[[<<[{(<(({[]<>}))><{[{{}<>}[()<>]]{{{}{}}<<>()>}}{({<>{}}<[]{}>)((<>{})([]{}})}>)<{[((()())(','({([{{<{[<[[<({}[])[[][]]>{{{}()}{{}[]}}]><{(<<><>>{[]()})[{<>()}[{}{}]]}[{[{}[]](<>())}([()]{{}<>','{{<{{{([(({<<[(){}]{()<>}>>({{{}<>}}{[<>()]})}[[[<{}()>(<>{})]<{{}<>}>][(({}())<<>()>)(({}<>){[]()})]]))[({<','{{<((((<{{[([(<>())(<>[])])([[(){}]{<><>}]{<<>{}>({}())})]((({[]()}(<>()))(<[]{}>[{}<>]))<([[]()]{<>()})<','(<[(([<{({<<{[<>{}]<[]()>}([<>{}}(<>()))>([<{}<>>[(){}]])>}){<[[{{[]{}}({}())}{<(){}>{()[]}}]{([[]{}]<{}[]>)','[[{[{<<((<[((<{}()>({}<>)))({([]<>)}({{}[]}(<>{}))}]{<<{(){}}>{[[]{}]([]<>)}><<[{}{}]<[]{}>>','<<<[<[<([[{<{((){}){<>()}}[[{}()]((){})}>}[(<<{}{}>[<>()]>{(<>{})[()<>]})[[(()<>)[[]()]][(()[])<','[<((([{{([{<[<[]<>>(()())]<[()()]{<>())>><<[{}[]]<()<>>>[([]()){[]()}]>}{<([{}{}]<(){}>)[{<>{}}(','{[[[([((<[[({({}{})[<><>]}[[<>[]]((){})])(<(()[]){{}<>}><<{}<>>([]<>)>)]]([<[{<><>}[{}<>]]','(<[[[<([[[[{{<()<>>{()<>}}{[[]{}][{}<>)}}<({()[]}([])){(()[])({}())}>](([{{}[]}{<>{}}](([][])([][]))))]]<{','[[({<<{{{<(<{<()[]>[[]<>]}{({}<>)}>(([{}<>]{{}[]})))>}([[{[[<><>](<>[])]}({<<>()>})][{{{()()}{[]()}}(({}[])(<','[{[{{<{(<((<{[{}[]][<><>]}{<(){}>[[]{}]}>))<{[[<()[]><(){}>]<{[]<>}[()()]>]{(([]{})<[]>)(([','([{{<[[[<{<<<{[]}{<>()}><[()()]{[]<>}>>[{[<>()>[<>()]}[[[]<>]{<><>}]]>(({[()()]{<><>}}[(<>','[(<[[<<{{(({[<{}()>][{[][]}{{}<>}]}[<<<><>>>{([]<>){[]<>}}]))<(<[[()()][()()]]({(){}}[(){}])>{<(<>[])<{','<[(<<{{[[{(([<<><>>{()()}]({()()}{{}{}}))<[{()()}<()()>]([{}[]]<[][]>)>)>]{(<[(({}())[[][]]){({})<','<({<{<(<<[<[[[{}{}][[]{}]][{[]{}}{{}<>}]]><<{[{}{}]([]{})}([[]{}])>{<(<>{}){[]<>}>{{{}<>}([][])}}>](','<[[[<(({[<<<({<>()}{[][]}>{({}<>){()}}>[{{<>[]}{()()}}[<{}[]>[<><>]]]>[<<(<>{})>([()<>][{}','(<({{(((<{{({[{}<>){[]<>}}[({}()){{}[]}])[{<[]{}>(<>())}([()[]](<>()))]}{{(<()()>){{<>()}}}[{[','[(<<<(<{(<{[{[[]()]{<>[]}}]{{[{}()][<><>]}<([][])<{}>>}}><{<<[{}()][<>()]}{({}<>)(()())}><<{{}()}<{}','(({<{[[{<<<[[<()()>[[][]]]{{<>()}{()()}}]<(([]{})[[][]])>>>{[<[<[]()>[()[]]]<([]())(()<>)>>]<({{(){}}{','{{[{{<[[[({{(({}[])[{}()])([{}()]{()<>}>}[[[<>()]{[][]}]{<()()>[<><>]}]}(<{[()()]({}<>)}[{()<>}{{}[]}]','{<[[[{([(((({([]<>)}[[<>[]]]){[(()[])([][])]{[()]<<>{}>>})[[{(<>[])[{}()]}{{{}()}([]<>)}]{<<<>{}>([','<({{([<<{<[((<(){}>{<><>])[{[][]}{{}{}}])]({[{{}[]}{()[]}][[()()](<>{})]}{(({}{}){[]()})})>}>>](<{','[{{{(<<{<<<[(<{}<>>)]>><[{(<[]{}>{{}<>})[[<>{}]]}([[()()]<{}<>>])]<([<()[]>{{}{}}][[{}[]]<[]{}>])>','<[(<[[<[[({[(({}())([]()))<[[]{}](<>{})>]{<<[][]><{}{}>>{[<>{}]([]())}}}){((({[][]}{<>[]}){[{}{}','[((<<[[<[{{(([<><>])({()[]}<[][]>)]}}]<<([{[()()]<[]<>>}<[{}[]][<><>]>])<<<[<><>]<{}[]>>{{[][]}}>{<{<>[]}<()','<{<[(<[({[<<(<{}{}>{{}{}})<(()<>){(){}}>][{<{}><<>()>}[(()[])<()()>]]>][[[{{{}<>}((){})}][([()[]]','[((((<{[{{{<{(<>{})(<>[])}<[(){}][[]<>]>>>}}(<((<({}[])<()<>>>)(<[()[]][<>{}]><[[][]](()<>)>))((','{[[<<[(((([(([<>[]]{()()})([<>[]]((){})))]{{[<{}<>><{}<>>]<{{}[]}(<>[])>}})<[([{{}()}((){})]{(<>{})<[]>})([<[','<{(<<[(<<[{{(([])[<>{}])((()<>){[][]})}}]({([<{}>[[][]]](<(){}>{<>()}))[[<[]{}>](<()()>[()<>]','[<({{{[(([{<({()()}<()<>>)<{<>{}}>>(<<()>[[]()]>[{()<>}<[]{}>])}]<<{<[<>[]]([]<>)>}><{{[<>()]({}(','<<<({{({{[([[([]{})<()()>]<<<>()><[]()>>]({<[]()>[{}<>]}{{<>{}}{()()}}))<({((){})[[][]]}(({})<','((<<{<[[([{(<((){})<<>[]>>{[[][]]<()[]>}){<(<>()){()[]}>[[[]<>]([]<>)])}]((<{{[]<>}{[]<>}}>','({({{{(<<{<<([{}{}](()()))((<>{}){[]{}})>([[()<>]](([]())<[]{}>))>{[((()()))<((){})([]<>)>]((<','<{{[[([{<{([<[()[]]>([()<>]([]))]<{{()()}{[]<>}}{{{}[]}<()>}>)<{[([]<>){()<>}][[()()][(){}]]}(({<><>','{<{{({[[{<([{[()()][()<>]}[([]{})(<>())]))<<[(<>[]){{}()}][<<><>>[[]]]>>><{<<[()[]]({})>[[[]]<(','(<[{{{{{<{<((({}<>)[<>()]))([<<><>>[()[]]])>}>([[{{[[]{}]<<>()>}}{({[]{}}([]{}))}>[(<({}()){()()}>','<(([[([{<<{(<<[]>{()[]}>{[[]<>]<<><>>}){[<[]()>[<>{}]][([]{})<<><>>]}}>>{{<[<{[]<>}([]{})]{({}<>){','<<{(<{<(<([{<{[]<>}>({[]()}{{}()})}<[{<>()}{<>()]]<<[]()>{()()}>>]<(([[]]{()()})[{{}[]}{{}}])(([{}','<[<{[([[({<[[{()[]}({}[])]]([<<>{}>(<><>)]<([]())[{}<>]>)>[(((()){{}[]})(<[]>(()<>)))<[<<><','<({{<<<<<<[<[{<>[]}[<>{}]]<<()()>{()}>>[<({}[])((){})>[<[]<>>[[]()]]]]>{{{[[[]{}](<>())]}}({(({}()){<>}','({(<{[<<{[([{[[]()]<(){}>}<{()()}<(){}>>][([()()][<>[]])<([]())(()())>])]({[<<[]<>>{[][]}>','[[(([<{<(<<[{{{}[]}[{}<>]}{<[]<>>[(){}]}]<{<()[]>{{}{}}}{{<>[]}{(){}}}>>{<[{()[]}{[]}]{{{}}{{}<','{{({<<({[<{([[{}{}][{}<>]][([]{})<{}()>])<[[<><>][[]()]]{(<>{})<{}[]>}>}>{<([[{}{}](<>[])]{{<>[]}','<((((({<([<({[()<>]([]())}({(){}}{<><>}))([[{}<>]([]<>)])><([<()()>[()<>]][[{}<>][{}()]]){[[<>[','[(<<[{<[([(({[[]{}][[][]]}[([]<>){()}]){[{{}{}}{[][]}]{{()[]}[<><>]}}){(((()[])([]())))[[[{','{{([<{([(<[(<<[]>{[]<>}>({<>()}<[][]>))]<<<[{}<>][{}{}]>[<()<>><{}{}>]><(<{}()>{<>()})[<()<>)([][])]>>><[<[','<{[[<{<{<<[{<[[][]]<(){}>>{([]())[<>()]}}[[<()<>>({}{})]{([]<>){[]()}}]]>>}<{{({(({}{})<<>()>)[([])([]{})]})','{[{{[[{<<{<[[<<><>>[<>[]]]<<{}<>><<>()>>]([[{}<>][{}[]]]([(){}]<<>()>))>{{<(()[])((){})>([{}<>]{<>()})}','[(((<{[({<{[<([])<[]{}>><(()<>){()<>}>]<[({}<>)({}[])]<(<>)({}{})>>}>}]][(<({(<<[][]>>([()','([<{<[<[{[<{<<<>{}>>{<<>()>[{}[]]}}<[{{}{}}[[][]]][(<>[])[{}[]]]>>{[[(<><>)[()<>]][({}<>)[<>(','<<{<([([<[{([(<><>)<<>[]>][((){})(<>[])])<([()[]]{[][]})(({}<>)<(){}>)>}([{({}{})<<>>}[{(){}}[<>{}]]])][((','[<<<((<{{{({[[[]{}][<>[]]]}{[{()[]}<{}{}>]<(<>{})(()<>)>})}(<<<[(){}]{[][]}>([{}<>]{()[]})>><{{<[]<>>{{','{{[<<(<{(<(<{((){})([]())}(({}{})<{}{}>)>[[{[]}<[]())]{<{}{}>(()())}])<([(()<>)[()[]]]((()())([][])','{(<<[(([{[<{({[]<>}(()())){<<>()><()()>}}<[(<>[])<<><>>]{[<>[]]<{}[]>}>>]}<{<<{[(){}]({}())}[(<>())]>','(({{(<{[{{[<<[(){}]<<>[]>>((<>())<()()>)><(<()[]>)<[[]{}]<<>>>>][{(<()()><<>{}>)<(<><>){[]{}}>}]}})([(<<[<<>','{({(<[[{([{(<{()()}<<>()>>)<(<{}[]}{(){}})[{[]<>}[[][]]]>}<[[[<>[]]<<>()>][[<>{}]]]<<(()[])([]','[({[[{<({[{[<<<>{}][[]()]>]}][(({((){}){(){}}}[[[][]]<[]()>])([([][])[(){}]]))]})>}[(<({{[<({}{']
points = {
		']':57,
		'}':1197,
		')':3,
		'>':25137
	}

incPoints = {
		']':2,
		'}':3,
		')':1,
		'>':4
	}

def evaluateLine(line):

	openMap = {
		'[':']',
		'{':'}',
		'(':')',
		'<':'>'
	}

	expect = []
	for s in line:
		if len(expect) == 0 or s in openMap.keys():
			expect.append(openMap[s])
		elif s != expect[len(expect)-1]:
			return s
		elif s == expect[len(expect)-1]:
			expect.pop(len(expect)-1)
	return ''.join(expect)

def expectPoints(expect, points):
	closeMap = {
		']':'[',
		'}':'{',
		')':'(',
		'>':'<'
	}
	total = 0
	for s in expect[::-1]:
		total = (total * 5) + points[s]
	return total

total = 0
totalList = []
for row in data:
	res = evaluateLine(row)
	if(len(res) == 1 and res in points.keys()):
		total += points[res]
	else:
		totalList.append(expectPoints(res, incPoints))
		

print(total)
totalList.sort()
print(totalList[len(totalList)/2])












